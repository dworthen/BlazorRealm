<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Blazor Realm | Blazor Realm </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Blazor Realm | Blazor Realm ">
    <meta name="generator" content="docfx 2.36.2.0"> 
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/hljs-vs.css"> 
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">   
    <meta property="docfx:newtab" content="true">
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container-fluid">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
        <a class="navbar-brand" href="../index.html">
            Realm
        </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container-fluid hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container-fluid body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="blazor-realm">Blazor Realm</h1>

<p>Redux state management for <a href="https://blazor.net">blazor.net</a>.</p>
<p><a href="https://dworthen.github.io/BlazorRealm/../quickstart.html">Documentation</a></p>
<blockquote><p><strong>NOTE FROM BLAZOR</strong></p>
<p>Blazor is an unsupported experimental web framework that shouldn&#39;t be used for production workloads at this time.</p>
</blockquote>
<ul>
<li><a href="#blazor-realm">Blazor Realm</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#application-state">Application State</a></li>
<li><a href="#actions">Actions</a></li>
<li><a href="#reducer">Reducer</a></li>
<li><a href="#add-realm-service">Add Realm Service</a></li>
<li><a href="#state-components">State Components</a></li>
<li><a href="#async-actions">Async Actions</a><ul>
<li><a href="#register-async-middleware">Register Async Middleware</a></li>
<li><a href="#dispatching-async-actions">Dispatching Async Actions</a></li>
</ul>
</li>
<li><a href="#redux-dev-tools">Redux Dev Tools</a><ul>
<li><a href="#register-devtools-middleware">Register DevTools Middleware</a></li>
<li><a href="#ignoring-specific-actions">Ignoring Specific Actions</a></li>
</ul>
</li>
</ul>
<h1 id="getting-started">Getting Started</h1>
<ol>
<li>For getting started with Blazor, visit <a href="https://blazor.net/../get-started.html">https://blazor.net/../get-started.html</a>.</li>
<li>Install <a href="https://www.nuget.org/packages/Blazor.Realm/">https://www.nuget.org/packages/Blazor.Realm/</a>.</li>
</ol>
<p><strong>Compatibility</strong></p>
<table>
<thead>
<tr>
<th>Blazor Realm</th>
<th>Blazor</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.5.9</td>
<td>0.5.x</td>
</tr>
<tr>
<td>0.6.x</td>
<td>0.6.x</td>
</tr>
<tr>
<td>0.7.x</td>
<td>0.7.x</td>
</tr>
</tbody>
</table>
<h1 id="application-state">Application State</h1>
<pre><code class="lang-csharp">// AppState.cs
public class AppState
{
    public int Count { get; set; }
    public IEnumerable&lt;WeatherForecast&gt; WeatherForecasts { get; set; } = new WeatherForecast[] { };
}

public class WeatherForecast
{
    public DateTime Date { get; set; }
    public int TemperatureC { get; set; }
    public int TemperatureF { get; set; }
    public string Summary { get; set; }
}
</code></pre><h1 id="actions">Actions</h1>
<pre><code class="lang-csharp">//Actions.cs

// Counter Actions
public class IncrementByOne : IRealmAction { }

public class IncrementByValue : IRealmAction
{
    public int Value { get; set; }
    public IncrementByValue(int value)
    {
        Value = value;
    }
}

public class DecrementByOne : IRealmAction { }

public class DecrementByValue : IRealmAction
{
    public int Value { get; set; }
    public DecrementByValue(int value)
    {
        Value = value;
    }
}

public class ResetCount : IRealmAction { }

// WeatherForecasts Actions
public class ClearWeatherForecasts : IRealmAction { }

public class SetWeatherForecasts : IRealmAction
{
    public IEnumerable&lt;WeatherForecast&gt; WeatherForecasts { get; set; }
    public SetWeatherForecasts(IEnumerable&lt;WeatherForecast&gt; forecasts)
    {
        WeatherForecasts = forecasts;
    }
}
</code></pre><p>Actions must implement <code>IRealmAction</code>.</p>
<h1 id="reducer">Reducer</h1>
<pre><code class="lang-csharp">// Reducer.cs

public static class Reducers
{
    public static AppState RootReducer(AppState appState, IRealmAction action)
    {
        if(appState == null)
        {
            throw new ArgumentNullException(nameof(appState));
        }

        // Return a new AppState
        return new AppState
        {
            // Composing Reducers for components
            Count = CounterReducer(appState.Count, action),
            WeatherForecasts = WeatherForecastsReducer(appState.WeatherForecasts, action)
        };
    }

    public static int CounterReducer(int count, IRealmAction action)
    {
        switch(action)
        {
            case IncrementByOne _:
                return count + 1;
            case IncrementByValue a:
                return count + a.Value;
            case DecrementByOne _:
                return count - 1;
            case DecrementByValue a:
                return count - a.Value;
            case ResetCount _:
                return 0;
            default:
                return count;
        }
    }

    public static IEnumerable&lt;WeatherForecast&gt;
    WeatherForecastsReducer(IEnumerable&lt;WeatherForecast&gt; forecasts, IRealmAction action)
    {
        switch(action)
        {
            case ClearWeatherForecasts _:
                return new WeatherForecast[] { };
            case SetWeatherForecasts a:
                return a.WeatherForecasts;
            default:
                return forecasts;
        }
    }

}
</code></pre><h1 id="add-realm-service">Add Realm Service</h1>
<pre><code class="lang-csharp">// Startup.cs
public void ConfigureServices(IServiceCollection services)
{
    services.AddRealmStore&lt;AppState&gt;(new AppState(), Reducers.RootReducer);
}
</code></pre><h1 id="state-components">State Components</h1>
<pre><code class="lang-csharp">@page &quot;/counter&quot;
@addTagHelper *, Blazor.Realm
@using Blazor.Realm;

&lt;RealmStateContainer TState=&quot;AppState&quot; Context=&quot;store&quot;&gt;
    &lt;ComponentTemplate&gt;
        @{
            AppState State = store.GetState();
            Action&lt;IRealmAction&gt; Dispatch = store.Dispatch;

            Action IncrementCount = () =&gt; Dispatch(new IncrementByValue(ChangeAmount));
            Action DecrementCount = () =&gt; Dispatch(new DecrementByValue(ChangeAmount));
        }
        &lt;h1&gt;Counter&lt;/h1&gt;

        &lt;p&gt;Current count: @State.Count&lt;/p&gt;

        Change By: &lt;input type=&quot;text&quot; name=&quot;IncementAmount&quot; bind=&quot;@ChangeAmount&quot; /&gt;&lt;br /&gt;

        &lt;button class=&quot;btn btn-primary&quot; onclick=&quot;@IncrementCount&quot;&gt;Increment&lt;/button&gt;&lt;br /&gt;
        &lt;button class=&quot;btn btn-primary&quot; onclick=&quot;@DecrementCount&quot;&gt;Decrement&lt;/button&gt;&lt;br /&gt;
    &lt;/ComponentTemplate&gt;
&lt;/RealmStateContainer&gt;

@functions {
    private int ChangeAmount { get; set; } = 1;
}
</code></pre><h1 id="async-actions">Async Actions</h1>
<p>As with Redux, Async actions in Realm are handled by middleware. Download the <a href="https://www.nuget.org/packages/Blazor.Realm.Async/">Blazor.Realm.Async nuget package</a>.</p>
<p>I prefer placing async actions in a seperate <em>Operations.cs</em> file.</p>
<pre><code class="lang-csharp">// Operations.cs

public class AsyncIncrementCounter : IAsyncRealmAction
{
    public Store&lt;AppState&gt; Store { get; set; }
    public int IncrementAmount { get; set; }
    public AsyncIncrementCounter(Store&lt;AppState&gt; store, int incrementAmount = 1)
    {
        Store = store ?? throw new ArgumentNullException(nameof(store));
        IncrementAmount = incrementAmount;
    }

    public async Task Invoke()
    {
        // Dispatch events to handle the start, middle
        // and end of async actions.
        // StartLoading and Endloading
        // are normal, sync actions defined in Actions.cs
        Store.Dispatch(new StartLoading());
        // Something async, like network call
        await Task.Delay(3000);
        // Call sync action to increment Counter
        Store.Dispatch(new IncrementByValue(IncrementAmount));
        Store.Dispatch(new EndLoading());
    }
}
</code></pre><p>Async actions must implement the <code>IAsyncRealmAction</code> interface and, in turn, implement <code>Task Invoke</code> method.</p>
<h2 id="register-async-middleware">Register Async Middleware</h2>
<pre><code class="lang-csharp">// Startup.cs
public void Configure(IBlazorApplicationBuilder app, 
    IStoreBuilder&lt;AppState&gt; RealmStoreBuilder)
{
    RealmStoreBuilder.UseRealmAsync&lt;AppState&gt;();

    app.AddComponent&lt;App&gt;(&quot;app&quot;);
}
</code></pre><h2 id="dispatching-async-actions">Dispatching Async Actions</h2>
<p>In <em>Counter.cshtml</em></p>
<pre><code class="lang-csharp">@page &quot;/counter&quot;
@addTagHelper *, Blazor.Realm
@using Blazor.Realm;

&lt;RealmStateContainer TState=&quot;AppState&quot; Context=&quot;store&quot;&gt;
    &lt;ComponentTemplate&gt;
        @{
            AppState State = store.GetState();
            Action&lt;IRealmAction&gt; Dispatch = store.Dispatch;

            Action IncrementCountAsync = () =&gt; Dispatch(new AsyncIncrementCounter(store, ChangeAmount));
            Action DecrementCount = () =&gt; Dispatch(new DecrementByValue(ChangeAmount));
        }
        &lt;h1&gt;Counter&lt;/h1&gt;

        &lt;p&gt;Current count: @State.Count&lt;/p&gt;

        Change By: &lt;input type=&quot;text&quot; name=&quot;IncementAmount&quot; bind=&quot;@ChangeAmount&quot; /&gt;&lt;br /&gt;

        &lt;button class=&quot;btn btn-primary&quot; onclick=&quot;@IncrementCountAsync&quot;&gt;Increment Async&lt;/button&gt;&lt;br /&gt;
        &lt;button class=&quot;btn btn-primary&quot; onclick=&quot;@DecrementCount&quot;&gt;Decrement&lt;/button&gt;&lt;br /&gt;
    &lt;/ComponentTemplate&gt;
&lt;/RealmStateContainer&gt;

@functions {
    private int ChangeAmount { get; set; } = 1;
}
</code></pre><h1 id="redux-dev-tools">Redux Dev Tools</h1>
<p><img src="../images/redux-devtools.GIF" alt="Redux DevTools"></p>
<p>Connecting to the <a href="http://extension.remotedev.io/">Redux DevTools</a> browser extension is handled by middleware.</p>
<p>Steps for connecting to Redux Dev Tools:</p>
<ol>
<li><a href="http://extension.remotedev.io/#installation">Install the browser extension</a>.</li>
<li>Install the middleware, <a href="https://www.nuget.org/packages/Blazor.Realm.ReduxDevTools/">https://www.nuget.org/packages/Blazor.Realm.ReduxDevTools/</a></li>
</ol>
<h2 id="register-devtools-middleware">Register DevTools Middleware</h2>
<pre><code class="lang-csharp">// Startup.cs
public void Configure(IBlazorApplicationBuilder app, 
    IStoreBuilder&lt;AppState&gt; RealmStoreBuilder)
{
    RealmStoreBuilder.UseRealmAsync&lt;AppState&gt;();

    RealmStoreBuilder.UseRealmReduxDevTools&lt;AppState&gt;();

    app.AddComponent&lt;App&gt;(&quot;app&quot;);
}
</code></pre><blockquote><p><strong>NOTE</strong></p>
<p>The order in which middleware is registred matters. Add <code>UseRealmReduxDevTools</code> after <code>UseRealmAsync</code>.</p>
</blockquote>
<h2 id="ignoring-specific-actions">Ignoring Specific Actions</h2>
<pre><code class="lang-csharp">// Startup.cs
public void Configure(IBlazorApplicationBuilder app, 
    IStoreBuilder&lt;AppState&gt; RealmStoreBuilder)
{
    RealmStoreBuilder.UseRealmAsync&lt;AppState&gt;();

    RealmStoreBuilder.UseRealmReduxDevTools&lt;AppState&gt;(new System.Type[]
    {
        typeof(Actions.Counter.Dispose)
    });

    app.AddComponent&lt;App&gt;(&quot;app&quot;);
}
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/dworthen/BlazorRealm/blob/master/docs/docs/quickstart.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script> {{!--
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.13.1/min/vs/loader.js"></script>
    <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.13.1/min/vs' } });
    
      // Before loading vs/editor/editor.main, define a global MonacoEnvironment that overwrites
      // the default worker url location (used when creating WebWorkers). The problem here is that
      // HTML5 does not allow cross-domain web workers, so we need to proxy the instantiation of
      // a web worker through a same-domain script
      window.MonacoEnvironment = {
        getWorkerUrl: function (workerId, label) {
          return `data:text/javascript;charset=utf-8,${encodeURIComponent(`
            self.MonacoEnvironment = {
              baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.13.1/min/vs'
            };
            importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.13.1/min/vs/base/worker/workerMain.js');`
          )}`;
        }
      };
    
    
    </script> --}}
    <script type="text/javascript" src="../styles/main.js"></script>  </body>
</html>
